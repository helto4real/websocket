name: CI
on: [push]
jobs:
    build:
        name: Autobahn integrations tests
        runs-on: ubuntu-latest
        env:
          AUTOBAHN_CONFIG: ${{github.workspace}}/tests/autobahn/config/
        # container:                             
        #   image: thevlang/vlang:buster-dev
        #   volumes:
        #     - ${{github.workspace}}:/src
        steps:
          - name: Checkout
            uses: actions/checkout@v2
        #   - name: Pring env 
        #     run: env
        #   - name: Init autobahn services
        #     run: docker-compose -f ${{github.workspace}}/tests/autobahn/docker-compose.yml up
          - name: Init autobahn services
            run: docker run -d -v ${{github.workspace}}/tests/autobahn/config:/config -p 9001:9001 crossbario/autobahn-testsuite
            
        #   - name: Install dependencies
        #     run: |
        #       v install emily33901.net
        #   - name: Build 
        #     run: |
        #       v examples/ping.v
        #   - name: Test V fixed tests
        #     run: |
        #       v test-fixed